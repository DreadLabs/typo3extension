<?xml version="1.0" encoding="UTF-8"?>
<project name="Remote">

	<target name="remote:cleanup-releases:prepare">
		<php expression="${target.releases.keep} + 1" returnProperty="superfluousReleasesStart" />
	</target>

	<target name="remote:cleanup-releases" depends="remote:cleanup-releases:prepare">
		<seclibssh
			host="${target.hostname}"
			port="${target.port}"
			username="${target.username}"
			password="${target.password}"
			command="ls -1dt ${target.path}/${target.releases.dir}/* | tail -n +${superfluousReleasesStart} | xarg rm -rf" />
	</target>

	<target name="remote:run" depends="project:is-clean, remote:release:upload:run, remote:release:extract:run, remote:release:update-symlink:run, remote:cleanup-releases">
	</target>
</project>