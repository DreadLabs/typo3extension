<?xml version="1.0" encoding="UTF-8"?>
<project name="ReplaceTokens" default="replace-tokens">

	<target name="replace-tokens" hidden="true">

		<import file="./ReplaceTokens/FilterChainDefault.xml" />
		<import file="./ReplaceTokens/FilterChainKickstart.xml" />

		<echo msg="Preparing templates for ${environment}" />

		<condition property="excludes" value="${excludes.default}">
			<equals arg1="${environment}" arg2="prod" />
		</condition>

		<condition property="excludes" value="${excludes.dev}">
			<equals arg1="${environment}" arg2="dev" />
		</condition>

		<copy todir="../src/" overwrite="true">
			<mapper type="regexp" from="^(.*)\.dist\.(.*)" to="\1.\2" />

			<fileset dir="../src/" excludes="${excludes}" />

			<filterchain refid="${replace-tokens.filterchain-id}" />
		</copy>
	</target>
</project>